# Lesson 3.4 - Random Numbers

## Random Number Generation

Random number is very useful in applications such as games. For example, you probably have to randomly shuffle a deck of cards in a card game.

C lets you generate random numbers using the **rand()** function from the _stdlib_ library (stdlib stands for **st**an**d**ard **lib**rary).

To use the function you need to put the following line of code at the top of your source file:

	#include <stdlib.h>

After doing this you can then use **rand()** and any other functions from the stdlib library.

The **rand()** function returns a random number in the range 0 to **RAND_MAX**. The value of **RAND_MAX** varies across different versions of the C language. We can assume that it is a sufficiently large number though, with the typical value being 32767.

Here is an example program which prints ten random numbers:

	#include <stdio.h>
	#include <stdlib.h>
	
```C
int main()
{
    int i;

    for (i = 0; i < 10; i++) {
        printf("%d\n", rand());
    }
}
```

[TenRandomNumbers.c](https://canvas.ust.hk/courses/44519/files/6293314/download?wrap=1 "TenRandomNumbers.c") 

Running the above example gives you an output like this:
![[Pasted image 20220705211058.png]]
As you can see, the ten numbers are randomly distributed and is relatively large. However, if we run the example again, we will have this display:
![[Pasted image 20220705211112.png]]
Hey, the numbers are exactly the same! The first time we ran the program, it gave ten random numbers. The second time we ran the program, it gave the same ten numbers. Does that mean the numbers are not really random? Actually, no matter how many times you are going to run the program, it will give you the same ten numbers every time. In the next part we will see how we can solve this problem.

## Randomizing the Random Numbers

The **rand()** function gives you the same set of random numbers every time you run the same program because of a value called **seed**.

You can think of the seed value as an identifier of a particular sequence of random numbers. So, if you use the same seed value in two different programs, the **rand()** function will return the same sequence of random numbers in these two programs.

If you do not specify the seed value at the start of a program, C will always set it to a certain value, which is the same for all programs. Therefore, if you want to use a different sequence of random numbers every time you run a program, you will have to change the seed value.

You can use the **srand()** function to do that. Typically, the seed value is set to the current time value. The time value is chosen because it is different every time you run a program. Therefore you can make sure that your program gets a different sequence of random numbers from **rand()** every time you run it.

Like **rand()**, the **srand()** function is available from the stdlib library. To get the current time value, you use the **time()** function from the _time_ library. We can extend the previous example, which generates ten random numbers, to use a seed value based on the time, like this:

	#include <stdio.h>
	#include <stdlib.h>
	#include <time.h>
	
```C
int main()
{
    int i;

    // Randomize the random numbers
    srand(time(0));

    for (i = 0; i < 10; i++) {
        printf("%d\n", rand());
    }
}
```

[TenRandomizedNumbers.c](https://canvas.ust.hk/courses/44519/files/6293241/download?wrap=1 "TenRandomizedNumbers.c") 

In the above example, we need the time library so this line of code has been used at the top of the file:

	#include <time.h>

Then, before generating the random numbers, the seed value is set to the current time value, which is returned by a call to **time(0)**. Doing so ensures the sequence of random numbers used by the program is really random. Here is an example display of running the example:
![[Pasted image 20220705211142.png]]
Here is an example display if we run it a second time:
![[Pasted image 20220705211201.png]]
As you can see, the random numbers generated by the program are different each time we run it.

## Getting Random Numbers Within a Range

It is useful to have random numbers in a C program. However, it is not so useful when the random numbers are very large.

For example, there are only fifty-two cards in a deck of cards. So if you want to randomly draw a card, the card should be identified by a number between, for example, 1 to 52.

In our previous examples, the random numbers are generated between 0 to **RAND_MAX**. You know that **RAND_MAX** is a big number. However, you cannot be entirely sure about the value of **RAND_MAX** because different versions of C may have different values. Because of these problems, in general, a random number returned by **rand()** is not too useful.

How to make the random numbers returned by **rand()** more useful to a program? We do that by changing the range of the number from 0 to **RAND_MAX**, to a range that required by the program.

Let's take a card game as an example. You want to randomly draw one of the fifty-two cards. Therefore, the random number is the most useful if it has a value from 1 to 52.

To adjust the range of a random number, we can use this calculation:
```C
int cardnumber;

cardnumber = rand() % 52 + 1;
```

What's going on in the above example?

Looking at the last line of the code, first the **rand()** function returns a random number between 0 to **RAND_MAX**. The number is then changed with the **%** operator.

The % operator means modulus, which is the remainder of the division between two numbers. For example, 5 divided by 3 has a remainder of 2 and therefore **5 % 3** gives you 2. Similarly, 25 divided by 7 has a remainder of 4 and therefore **25 % 7** gives you 4.

In the above example, the remainder of the division between the random number returned by **rand()** and **52** gives a number between 0 to 51. And then, the number is added by one, which makes it having a range of 1 to 52.

In general, if you want to have a random number between **a** and **b**, the range of the random number returned by **rand()** is modified by the following calculation:

	rand() % (b - a + 1) + a